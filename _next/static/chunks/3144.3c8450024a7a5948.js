"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3144],{33144:function(e,t,n){n.r(t),n.d(t,{default:function(){return C}});var i=n(85893);let r=n(964).ZP.div.withConfig({componentId:"sc-18f301cd-0"})(["align-items:center;background-color:#000;display:flex;height:100%;width:100%;canvas{image-rendering:pixelated;image-rendering:crisp-edges;position:absolute;top:0 !important;touch-action:none;-webkit-touch-callout:none;user-select:none;width:100%;}div,video{display:none;}.emulator-mouse-overlay{display:block;inset:0;position:absolute;}"]);var o=n(67294);let a={emulatorFunction:"dosWorker"},l=["__core-js_shared__","compiled","core","emulatorsUi","exports","WDOSBOX","worker"],s=".zip.save",u={".jsdos/dosbox.conf":"/Program Files/js-dos/dosbox.conf",".jsdos/jsdos.json":"/Program Files/js-dos/jsdos.json"},c=new Set(["Alt","ContextMenu","F1","F3","F5","F6","F7","F10","F11","F12"]);var d=n(1864),h=n(34772),f=n(59140),p=n(78743),w=n(26550),v=n(27972),m=n(62351),b=n(48764).Buffer;let g=async(e,t)=>{let{addFileToZip:i,isFileInZip:r}=await n.e(3456).then(n.bind(n,93456));return Object.entries(u).reduce(async(e,[n,o])=>{let a=await e;return a.length>0&&await r(a,n)?a:i(a,o,n,t)},Promise.resolve(e))};var y=(e,t,i,r)=>{let{appendFileToTitle:a}=(0,h.Z)(e),{exists:u,mkdirRecursive:c,readFile:y,updateFolder:x,writeFile:k}=(0,f.o)(),{linkElement:T,processes:{[e]:E}}=(0,p.z)(),{closing:$}=E||{},[j,C]=(0,o.useState)({}),S=(0,o.useCallback)(async(e,t,n=!1)=>{let i=`${(0,d.basename)(e)}${s}`;await u(w.Tl)||(await c(w.Tl),x((0,d.dirname)(w.Tl)));let o=(0,d.join)(w.Tl,i);if(void 0!==j[e]&&await k(o,b.from(await j[e].persist()||[]),!0)){if(t){let e=(0,d.join)(w.Xo,w.Tl),n=(0,d.join)(w.Xo,`${o}${w.Qy}`);await u(e)||(await c(e),x((0,d.dirname)(w.Tl))),await k(n,t,!0)}n&&(null==r||r.stop()),x(w.Tl,i)}},[j,r,u,c,x,k]),F=(0,o.useCallback)(async()=>{let o;let[c]=Object.keys(j);c&&S(c);let h=t?await y(t):b.from(""),f=(0,v.RT)(t),{zipAsync:p}=await n.e(3456).then(n.bind(n,93456)),x=async e=>b.from(await p({[(0,d.basename)(t)]:e})),k=async e=>(0,v.YS)(await g(e,y)),E=".exe"===f?await x(h):h;if(".jsdos"===f)o=(0,v.YS)(E);else try{o=await k(E)}catch{o=await k(await x(h))}let $=(0,d.join)(w.Tl,`${(0,d.basename)(t)}${s}`),F=await u($)?(0,v.YS)(await y($)):void 0,L=await (null==r?void 0:r.run(o,F));if(L){var z;let n=null===(z=i.current)||void 0===z?void 0:z.querySelector("canvas");n instanceof HTMLCanvasElement&&(T(e,"peekElement",n),C({[t]:L}),a((0,d.basename)(t)),(0,v.EK)(o),F&&(0,v.EK)(F),(0,m.od)(l))}},[a,S,i,j,r,u,e,T,y,t]);return(0,o.useEffect)(()=>(!E||$||!r||t in j||(C({[t]:void 0}),F()),()=>{if(t&&$){let e=e=>{window.setTimeout(()=>S(t,e,$),w.jx.WINDOW)};(async()=>{var e;let n=await (null===(e=j[t])||void 0===e?void 0:e.screenshot());return n?(0,v.fv)(n):void 0})().then(e).catch(e)}}),[S,$,j,r,F,E,t]),j[t]},x=n(81338),k=n(49822),T=n(12691);let E=e=>{c.has(e.key)&&e.preventDefault()};var $=({containerRef:e,id:t,loading:n,setLoading:i,url:r})=>{let{updateWindowSize:l}=(0,k.Z)(t),[s,u]=(0,o.useState)(),c=(0,x.Z)(),d=(0,o.useRef)(!1),{foregroundId:h}=(0,T.k)(),f=y(t,r,e,s),{closeWithTransition:m,processes:{[t]:{libs:b=[]}={}}={}}=(0,p.z)();(0,o.useEffect)(()=>{s||d.current||(d.current=!0,(0,v.mb)(b).then(()=>{if(window.emulators&&(window.emulators.pathPrefix="/Program Files/js-dos/",e.current)){let t=e.current.closest("section");null==t||t.addEventListener("keydown",E,{capture:!0}),null==t||t.addEventListener("keyup",E,{capture:!0}),null==t||t.addEventListener("focus",()=>{var t;return null===(t=e.current)||void 0===t?void 0:t.focus(w.eS)},{passive:!0}),u(window.Dos(e.current,a))}}))},[e,s,b]),(0,o.useEffect)(()=>{if(f&&n){l(f.height(),f.width());let n=f.events();n.onMessage((e,n)=>{if(n.startsWith("[LOG_EXEC]")){let[,e]=n.split("[LOG_EXEC]"),[i]=e.replace("Parsing command line: ","").split(" ");"EXIT"===i.toUpperCase()&&m(t)}}),n.onFrameSize(()=>{var t;let n=null===(t=e.current)||void 0===t?void 0:t.querySelector("canvas"),[i,r]=[(0,v.Vy)(null==n?void 0:n.style.width),(0,v.Vy)(null==n?void 0:n.style.height)],{height:o=0,width:a=0}=(null==n?void 0:n.getBoundingClientRect())||{};r&&i&&(r!==o||i!==a)&&l(r,i)}),n.onExit(()=>{var e,t;return null===(t=window.SimpleKeyboardInstances)||void 0===t?void 0:null===(e=t.emulatorKeyboard)||void 0===e?void 0:e.destroy()}),i(!1),c(window.JSDOS_FS,"JS-DOS")}},[m,e,f,null==s?void 0:s.layers,t,n,c,i,l]),(0,o.useLayoutEffect)(()=>{if(t===h&&!n){var i;null===(i=e.current)||void 0===i||i.focus(w.eS)}},[e,n,h,t])},j=n(50834),C=({id:e})=>(0,i.jsx)(j.Z,{StyledComponent:r,id:e,useHook:$})},50834:function(e,t,n){var i=n(85893),r=n(5152),o=n.n(r),a=n(67294),l=n(54944),s=n(78743);let u=o()(()=>n.e(446).then(n.bind(n,60446)),{loadableGenerated:{webpack:()=>[60446]}});t.Z=(0,a.memo)(({id:e,useHook:t,StyledComponent:n,children:r})=>{let{processes:{[e]:{url:o=""}={}}}=(0,s.z)(),c=(0,a.useRef)(null),[d,h]=(0,a.useState)(!0),f=(0,a.useMemo)(()=>({contain:"strict",visibility:d?"hidden":"visible"}),[d]);return t({containerRef:c,id:e,loading:d,setLoading:h,url:o}),(0,i.jsxs)(i.Fragment,{children:[d&&(0,i.jsx)(u,{}),(0,i.jsx)(n,{ref:c,style:f,...(0,l.Z)({id:e}),children:r})]})})},81338:function(e,t,n){var i=n(67294),r=n(59140);t.Z=()=>{let{mountEmscriptenFs:e,unMapFs:t,updateFolder:n}=(0,r.o)(),o=(0,i.useRef)();return(0,i.useEffect)(()=>()=>{if(o.current){let e=o.current;o.current="";try{t(e,!0).then(()=>n("/",void 0,e))}catch{}}},[t,n]),(0,i.useCallback)(async(t,i)=>{if(!t)return;let r="";try{r=await e(t,i)}catch{}r&&(n("/",r),o.current=r)},[e,n])}},54944:function(e,t,n){var i=n(1864),r=n(67294),o=n(46013),a=n(36094),l=n(41893),s=n(59140),u=n(78743),c=n(12691),d=n(26550),h=n(27972);t.Z=({callback:e,directory:t=d.Ll,id:n,onDragLeave:f,onDragOver:p,updatePositions:w})=>{let{url:v}=(0,u.z)(),{iconPositions:m,sortOrders:b,setIconPositions:g}=(0,c.k)(),{mkdirRecursive:y,updateFolder:x,writeFile:k}=(0,s.o)(),T=(0,r.useCallback)(async(e,t,r)=>{if(n){if(t){let o=(0,i.join)(d.Ll,e);if(await y(d.Ll),await k(o,t,!0))return r===l.v.UPDATE_URL&&v(n,o),x(d.Ll,e),(0,i.basename)(o)}else r===l.v.UPDATE_URL&&v(n,e)}return""},[n,y,x,v,k]),{openTransferDialog:E}=(0,o.Z)();return{onDragLeave:f,onDragOver:e=>{null==p||p(e),(0,h.nK)(e)},onDrop:r=>{if(!d.my.has((0,h.RT)(t))){if(w&&r.target instanceof HTMLElement){let{files:e,text:n}=(0,a.p4)(r);if(0===e.length&&""===n)return;let o={x:r.clientX,y:r.clientY},l=[];if(n){try{l=JSON.parse(n)}catch{}if(!Array.isArray(l))return;let[e]=l;if(!e||e.startsWith(t)&&(0,i.basename)(e)===(0,i.relative)(t,e))return;l=l.map(e=>(0,i.basename)(e))}else l=e instanceof FileList?[...e].map(e=>e.name):[...e].map(e=>{var t;return(null===(t=e.getAsFile())||void 0===t?void 0:t.name)||""}).filter(Boolean);l=l.map(e=>{if(!m[`${t}/${e}`])return e;let n=0,r="";do n+=1,r=`${t}/${(0,i.basename)(e,(0,i.extname)(e))} (${n})${(0,i.extname)(e)}`;while(m[r]);return(0,i.basename)(r)}),(0,h.vi)(t,r.target,m,b,o,l,g)}(0,a.WG)(r,e||T,t,E,!!n)}}}}},59886:function(e,t,n){n.d(t,{BS:function(){return a},FC:function(){return r},F_:function(){return i},wV:function(){return o}});let i={bottom:!1,bottomLeft:!1,bottomRight:!1,left:!1,right:!1,top:!1,topLeft:!1,topRight:!1},r={bottom:!0,bottomLeft:!0,bottomRight:!0,left:!0,right:!0,top:!0,topLeft:!0,topRight:!0},o=30,a=166,l={cancel:".cancel",dragHandleClassName:"handle",enableUserSelectHack:!1,minHeight:`${o}px`,minWidth:`${a}px`,resizeHandleStyles:{bottom:{bottom:"-3px",cursor:"ns-resize",height:"6px"},bottomLeft:{bottom:"-3px",cursor:"nesw-resize",height:"12px",left:"-3px",width:"12px"},bottomRight:{bottom:"-3px",cursor:"nwse-resize",height:"12px",right:"-3px",width:"12px"},left:{cursor:"ew-resize",left:"-3px",width:"6px"},right:{cursor:"ew-resize",right:"-3px",width:"6px"},top:{cursor:"ns-resize",height:"6px",top:"-3px"},topLeft:{cursor:"nwse-resize",height:"12px",left:"-3px",top:"-3px",width:"12px"},topRight:{cursor:"nesw-resize",height:"12px",right:"-3px",top:"-3px",width:"12px"}}};t.ZP=l},38939:function(e,t,n){n.d(t,{Rf:function(){return l},b$:function(){return c},hu:function(){return a},ix:function(){return u},mZ:function(){return s}});var i=n(59886),r=n(26550),o=n(27972);let a=(e,t,n=[],i=0)=>{let[a]=e.split(r.CC),l=`${a}${r.CC}`,s=n.find(e=>e.startsWith(l))||"",{componentWindow:u}=(null==t?void 0:t[s])||{},{x:c=0,y:d=0,width:h=0,height:f=0}=(null==u?void 0:u.getBoundingClientRect())||{};return!(c+i+h>(0,o.E9)()||d+i+f>(0,o.sI)())&&(c||d)?{x:c+i,y:d+i}:void 0},l=({height:e,width:t})=>{let[n,i]=[(0,o.sI)(),(0,o.E9)()];return{x:Math.floor(i/2-(0,o.Vy)(t)/2),y:Math.floor((n-r.bK)/2-(0,o.Vy)(e)/2)}},s={BOTTOM:15,LEFT:150,RIGHT:50,TOP:15},u=(e,t,n=!1)=>{let{position:i,size:r}=e||{},{x:a=0,y:l=0}=i||{},{height:u=0,width:c=0}=r||{};return n?a+s.RIGHT>t.x||a+(0,o.Vy)(c)-s.LEFT<0||l+s.BOTTOM>t.y||l+s.TOP<0:a<0||l<0||a+(0,o.Vy)(c)>t.x||l+(0,o.Vy)(u)>t.y},c=(e,t)=>{let n=Number(e.height),a=Number(e.width),[l,s]=[(0,o.sI)(),(0,o.E9)()],u=l-r.bK,c=Math.max(i.wV,Math.min(n,u)),d=Math.max(i.BS,Math.min(a,s));if(!t)return{height:c,width:d};let h=n===c,f=a===d;return h||f?h?f?{height:c,width:d}:{height:Math.round(c/(a/d)),width:d}:{height:c,width:Math.round(d/(n/c))}:n>a?{height:c,width:Math.round(d/(u/c))}:{height:Math.round(c/(s/d)),width:d}}},34772:function(e,t,n){var i=n(67294),r=n(78743),o=n(28272),a=n(26550);t.Z=e=>{let{title:t}=(0,r.z)(),[n]=e.split(a.CC),{title:l}=o.Z[n]||{};return{appendFileToTitle:(0,i.useCallback)((n,i)=>{let r=n?` - ${n}${i?` ${a.xy}`:""}`:"";t(e,`${l}${r}`)},[e,l,t]),prependFileToTitle:(0,i.useCallback)((n,i,r)=>{let o=n?`${i?`${a.xy} `:""}${n}${r?" ":" - "}`:"";t(e,`${o}${l}`)},[e,l,t])}}},49822:function(e,t,n){var i=n(964),r=n(67294),o=n(38939),a=n(78743),l=n(12691);t.Z=e=>{let{setWindowStates:t}=(0,l.k)(),{processes:{[e]:{lockAspectRatio:n=!1,maximized:s=!1}={}}={}}=(0,a.z)(),{sizes:{titleBar:u}}=(0,i.Fg)();return{updateWindowSize:(0,r.useCallback)((i,r)=>t(t=>({...t,[e]:{...null==t?void 0:t[e],maximized:s,size:(0,o.b$)({height:i+u.height,width:r},n)}})),[e,n,s,t,u.height])}}},62351:function(e,t,n){n.d(t,{H3:function(){return l},od:function(){return i},wz:function(){return a}});let i=e=>e.forEach(e=>{if(e in window)try{delete window[e]}finally{Object.assign(window,{[e]:void 0})}}),r=e=>{let t;Object.defineProperty(window,e,{get(){var n;return(null===(n=window.lockedGlobals)||void 0===n?void 0:n[e])?void 0:t},set(n){var i;(null===(i=window.lockedGlobals)||void 0===i?void 0:i[e])||(t=n)}})},o=(e,t)=>{window.lockedGlobals={...window.lockedGlobals,[e]:t}},a=e=>o(e,!0),l=e=>{Object.getOwnPropertyDescriptor(window,e)||r(e),o(e,!1)}}}]);