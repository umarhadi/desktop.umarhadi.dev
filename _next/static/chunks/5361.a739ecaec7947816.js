"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5361],{65361:function(e,t,n){n.r(t),n.d(t,{default:function(){return v}});var i=n(85893),a=n(964);let r=a.ZP.div.withConfig({componentId:"sc-bf9d7d9b-0"})(["height:",";width:100%;canvas{height:100%;width:100%;}"],({theme:e})=>`calc(100% - ${e.sizes.titleBar.height}px)`);var l=n(67294),s=n(81338),o=n(78743),u=n(12691),c=n(26550),d=n(27972),f=({containerRef:e,id:t,setLoading:n})=>{let{processes:{[t]:i}={}}=(0,o.z)(),r=(0,s.Z)(),{windowStates:{[t]:f}}=(0,u.k)(),{size:h}=f||{},{libs:v}=i||{},{sizes:{titleBar:m}}=(0,a.Fg)(),w=(0,l.useCallback)(()=>{var t;return null===(t=e.current)||void 0===t?void 0:t.querySelector("canvas")},[e]);(0,l.useEffect)(()=>{if(h){var e,t,n,i;null===(e=(t=window.CCModule).setCanvasSize)||void 0===e||e.call(t,(0,d.Vy)(h.width),(0,d.Vy)(h.height)-m.height),null===(n=(i=window.CCModule).OnResize)||void 0===n||n.call(i)}},[h,m.height]),(0,l.useEffect)(()=>{window.CCModule||setTimeout(()=>{let e=w();window.CCModule={arguments:["Singleplayer"],canvas:e,postRun:[()=>{n(!1),r(window.FS,"ClassiCube")},()=>{let{width:t,height:n}=e.getBoundingClientRect()||{};e.width=t,e.height=n}],print:console.info,setStatus:console.info},(0,d.mb)(v)},c.jx.WINDOW)},[w,v,r,n])},h=n(50834),v=({id:e})=>(0,i.jsx)(h.Z,{StyledComponent:r,id:e,useHook:f,children:(0,i.jsx)("canvas",{onContextMenu:d.nK})})},50834:function(e,t,n){var i=n(85893),a=n(5152),r=n.n(a),l=n(67294),s=n(54944),o=n(78743);let u=r()(()=>n.e(446).then(n.bind(n,60446)),{loadableGenerated:{webpack:()=>[60446]}});t.Z=(0,l.memo)(({id:e,useHook:t,StyledComponent:n,children:a})=>{let{processes:{[e]:{url:r=""}={}}}=(0,o.z)(),c=(0,l.useRef)(null),[d,f]=(0,l.useState)(!0),h=(0,l.useMemo)(()=>({contain:"strict",visibility:d?"hidden":"visible"}),[d]);return t({containerRef:c,id:e,loading:d,setLoading:f,url:r}),(0,i.jsxs)(i.Fragment,{children:[d&&(0,i.jsx)(u,{}),(0,i.jsx)(n,{ref:c,style:h,...(0,s.Z)({id:e}),children:a})]})})},81338:function(e,t,n){var i=n(67294),a=n(59140);t.Z=()=>{let{mountEmscriptenFs:e,unMapFs:t,updateFolder:n}=(0,a.o)(),r=(0,i.useRef)();return(0,i.useEffect)(()=>()=>{if(r.current){let e=r.current;r.current="";try{t(e,!0).then(()=>n("/",void 0,e))}catch{}}},[t,n]),(0,i.useCallback)(async(t,i)=>{if(!t)return;let a="";try{a=await e(t,i)}catch{}a&&(n("/",a),r.current=a)},[e,n])}},54944:function(e,t,n){var i=n(1864),a=n(67294),r=n(46013),l=n(36094),s=n(41893),o=n(59140),u=n(78743),c=n(12691),d=n(26550),f=n(27972);t.Z=({callback:e,directory:t=d.Ll,id:n,onDragLeave:h,onDragOver:v,updatePositions:m})=>{let{url:w}=(0,u.z)(),{iconPositions:C,sortOrders:b,setIconPositions:g}=(0,c.k)(),{mkdirRecursive:p,updateFolder:y,writeFile:k}=(0,o.o)(),x=(0,a.useCallback)(async(e,t,a)=>{if(n){if(t){let r=(0,i.join)(d.Ll,e);if(await p(d.Ll),await k(r,t,!0))return a===s.v.UPDATE_URL&&w(n,r),y(d.Ll,e),(0,i.basename)(r)}else a===s.v.UPDATE_URL&&w(n,e)}return""},[n,p,y,w,k]),{openTransferDialog:S}=(0,r.Z)();return{onDragLeave:h,onDragOver:e=>{null==v||v(e),(0,f.nK)(e)},onDrop:a=>{if(!d.my.has((0,f.RT)(t))){if(m&&a.target instanceof HTMLElement){let{files:e,text:n}=(0,l.p4)(a);if(0===e.length&&""===n)return;let r={x:a.clientX,y:a.clientY},s=[];if(n){try{s=JSON.parse(n)}catch{}if(!Array.isArray(s))return;let[e]=s;if(!e||e.startsWith(t)&&(0,i.basename)(e)===(0,i.relative)(t,e))return;s=s.map(e=>(0,i.basename)(e))}else s=e instanceof FileList?[...e].map(e=>e.name):[...e].map(e=>{var t;return(null===(t=e.getAsFile())||void 0===t?void 0:t.name)||""}).filter(Boolean);s=s.map(e=>{if(!C[`${t}/${e}`])return e;let n=0,a="";do n+=1,a=`${t}/${(0,i.basename)(e,(0,i.extname)(e))} (${n})${(0,i.extname)(e)}`;while(C[a]);return(0,i.basename)(a)}),(0,f.vi)(t,a.target,C,b,r,s,g)}(0,l.WG)(a,e||x,t,S,!!n)}}}}}}]);