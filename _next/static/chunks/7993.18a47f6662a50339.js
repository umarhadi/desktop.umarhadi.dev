"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7993],{17993:function(e,t,n){n.r(t),n.d(t,{default:function(){return f}});var a=n(85893);let i=n(964).ZP.div.withConfig({componentId:"sc-aa74e590-0"})(["height:calc(100% - 30px) !important;width:100% !important;canvas{height:calc(100% + 12px) !important;width:100% !important;}"]);var r=n(67294),l=n(81338),s=n(78743),o=n(26550),c=n(27972),u=({containerRef:e,id:t,setLoading:n})=>{let{processes:{[t]:{libs:a=[]}={}}={}}=(0,s.z)(),[i,u]=(0,r.useState)(),d=(0,l.Z)();(0,r.useEffect)(()=>{var t;let a=null===(t=e.current)||void 0===t?void 0:t.querySelector("canvas");a instanceof HTMLCanvasElement&&(window.Module={canvas:a,postRun:()=>{n(!1),d(window.FS,"SpaceCadet")}},u(a))},[e,d,n]),(0,r.useEffect)(()=>(i&&setTimeout(()=>{var t;let{height:n,width:r}=(null===(t=e.current)||void 0===t?void 0:t.getBoundingClientRect())||{};n&&r&&(i.style.height=`${n}px`,i.style.width=`${r}px`,(0,c.mb)(a,void 0,!!window.Module.canvas))},o.jx.WINDOW),()=>{if(i&&window.Module)try{var e;null===(e=window.Module.SDL2)||void 0===e||e.audioContext.close()}catch{}}),[i,e,a])},d=n(50834),f=({id:e})=>(0,a.jsx)(d.Z,{StyledComponent:i,id:e,useHook:u,children:(0,a.jsx)("canvas",{id:"canvas",onContextMenu:c.nK})})},50834:function(e,t,n){var a=n(85893),i=n(5152),r=n.n(i),l=n(67294),s=n(54944),o=n(78743);let c=r()(()=>n.e(446).then(n.bind(n,60446)),{loadableGenerated:{webpack:()=>[60446]}});t.Z=(0,l.memo)(({id:e,useHook:t,StyledComponent:n,children:i})=>{let{processes:{[e]:{url:r=""}={}}}=(0,o.z)(),u=(0,l.useRef)(null),[d,f]=(0,l.useState)(!0),v=(0,l.useMemo)(()=>({contain:"strict",visibility:d?"hidden":"visible"}),[d]);return t({containerRef:u,id:e,loading:d,setLoading:f,url:r}),(0,a.jsxs)(a.Fragment,{children:[d&&(0,a.jsx)(c,{}),(0,a.jsx)(n,{ref:u,style:v,...(0,s.Z)({id:e}),children:i})]})})},81338:function(e,t,n){var a=n(67294),i=n(59140);t.Z=()=>{let{mountEmscriptenFs:e,unMapFs:t,updateFolder:n}=(0,i.o)(),r=(0,a.useRef)();return(0,a.useEffect)(()=>()=>{if(r.current){let e=r.current;r.current="";try{t(e,!0).then(()=>n("/",void 0,e))}catch{}}},[t,n]),(0,a.useCallback)(async(t,a)=>{if(!t)return;let i="";try{i=await e(t,a)}catch{}i&&(n("/",i),r.current=i)},[e,n])}},54944:function(e,t,n){var a=n(1864),i=n(67294),r=n(46013),l=n(36094),s=n(41893),o=n(59140),c=n(78743),u=n(12691),d=n(26550),f=n(27972);t.Z=({callback:e,directory:t=d.Ll,id:n,onDragLeave:v,onDragOver:m,updatePositions:h})=>{let{url:p}=(0,c.z)(),{iconPositions:w,sortOrders:y,setIconPositions:b}=(0,u.k)(),{mkdirRecursive:x,updateFolder:g,writeFile:C}=(0,o.o)(),L=(0,i.useCallback)(async(e,t,i)=>{if(n){if(t){let r=(0,a.join)(d.Ll,e);if(await x(d.Ll),await C(r,t,!0))return i===s.v.UPDATE_URL&&p(n,r),g(d.Ll,e),(0,a.basename)(r)}else i===s.v.UPDATE_URL&&p(n,e)}return""},[n,x,g,p,C]),{openTransferDialog:k}=(0,r.Z)();return{onDragLeave:v,onDragOver:e=>{null==m||m(e),(0,f.nK)(e)},onDrop:i=>{if(!d.my.has((0,f.RT)(t))){if(h&&i.target instanceof HTMLElement){let{files:e,text:n}=(0,l.p4)(i);if(0===e.length&&""===n)return;let r={x:i.clientX,y:i.clientY},s=[];if(n){try{s=JSON.parse(n)}catch{}if(!Array.isArray(s))return;let[e]=s;if(!e||e.startsWith(t)&&(0,a.basename)(e)===(0,a.relative)(t,e))return;s=s.map(e=>(0,a.basename)(e))}else s=e instanceof FileList?[...e].map(e=>e.name):[...e].map(e=>{var t;return(null===(t=e.getAsFile())||void 0===t?void 0:t.name)||""}).filter(Boolean);s=s.map(e=>{if(!w[`${t}/${e}`])return e;let n=0,i="";do n+=1,i=`${t}/${(0,a.basename)(e,(0,a.extname)(e))} (${n})${(0,a.extname)(e)}`;while(w[i]);return(0,a.basename)(i)}),(0,f.vi)(t,i.target,w,y,r,s,b)}(0,l.WG)(i,e||L,t,k,!!n)}}}}}}]);