"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7640],{57640:function(e,t,n){n.r(t),n.d(t,{default:function(){return z}});var r=n(85893),a=n(1864),l=n(67294);let i=(0,l.memo)(()=>(0,r.jsx)("svg",{viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M30 2v10h-2V5.422L5.422 28H12v2H2V20h2v6.578L26.578 4H20V2h10z"})})),s=(0,l.memo)(()=>(0,r.jsx)("svg",{viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M4 18h10v10h-2v-6.578L1.453 31.953.047 30.547 10.578 20H4v-2zm17.422-6H28v2H18V4h2v6.578L30.547.047l1.406 1.406z"})})),o=(0,l.memo)(()=>(0,r.jsx)("svg",{viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M31.703 30.297Q32 30.594 32 31t-.297.703T31 32t-.703-.297l-12.266-12.25q-1.5 1.234-3.289 1.891T11 22q-1.516 0-2.922-.391T5.453 20.5t-2.227-1.727-1.727-2.227T.39 13.921t-.391-2.922.391-2.922 1.109-2.625 1.727-2.227 2.227-1.727T8.078.389 11-.002t2.922.391 2.625 1.109 2.227 1.727 1.727 2.227 1.109 2.625.391 2.922q0 1.953-.656 3.742t-1.891 3.289zM11 20q1.859 0 3.5-.711t2.859-1.93 1.93-2.859T20 11t-.711-3.5-1.93-2.859-2.859-1.93T11 2t-3.5.711-2.859 1.93T2.711 7.5 2 11t.711 3.5 1.93 2.859 2.859 1.93T11 20zm1-10h4v2h-4v4h-2v-4H6v-2h4V6h2v4z"})})),c=(0,l.memo)(()=>(0,r.jsx)("svg",{viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M32 30.906q0 .438-.266.766T31 32q-.406 0-.703-.297l-12.266-12.25q-1.5 1.234-3.289 1.891T11 22q-1.516 0-2.922-.391T5.453 20.5t-2.227-1.727-1.727-2.227T.39 13.921t-.391-2.922.391-2.922 1.109-2.625 1.727-2.227 2.227-1.727T8.078.389 11-.002t2.922.391 2.625 1.109 2.227 1.727 1.727 2.227 1.109 2.625.391 2.922q0 1.953-.656 3.742t-1.891 3.289q.234.234.898.891t1.594 1.563 2.031 1.992 2.219 2.203 2.164 2.18 1.859 1.922 1.297 1.43.484.695zM11 20q1.859 0 3.5-.711t2.859-1.93 1.93-2.859T20 11t-.711-3.5-1.93-2.859-2.859-1.93T11 2t-3.5.711-2.859 1.93T2.711 7.5 2 11t.711 3.5 1.93 2.859 2.859 1.93T11 20zM6 10h10v2H6v-2z"})}));var u=n(964);let d="48px",v="32px",h=u.ZP.div.withConfig({componentId:"sc-3ecd8b5d-0"})(["background-color:#222;display:flex;height:100%;padding-bottom:",";padding-top:",";position:relative;svg{fill:#fff;}figure{display:flex;height:100%;margin:0 "," ",";overflow:hidden;place-content:center;place-items:center;width:100%;div{color:rgb(167,167,167);font-size:13px;padding:0 38px;text-align:center;}img{display:",";max-height:100%;max-width:100%;}}nav{display:flex;height:",";place-content:center;place-items:center;position:absolute;&.top{top:0;width:100%;svg{height:16px;}}&.bottom{bottom:0;right:0;svg{height:20px;margin-top:2px;}}button{height:",";width:",";&:disabled{pointer-events:none;svg{fill:rgb(125,125,125);}}&:hover{background-color:rgba(75,75,75,50%);}&:active{background-color:rgba(100,100,100,50%);}}}"],v,d,v,v,({$showImage:e})=>e?"block":"none",d,d,d);var f=n(57631),m=n(52362),p=n(78743),g=n(34772);let w={cursor:"default",maxScale:7,minScale:1,panOnlyWhenZoomed:!0,step:.1};var x=(e,t,n)=>{let[r,i]=(0,l.useState)(),{getScale:s,reset:o,zoomIn:c,zoomOut:u,zoomToPoint:d,zoomWithWheel:v}=r||{},{processes:{[e]:h}}=(0,p.z)(),{closing:x,componentWindow:b,url:T=""}=h||{},{prependFileToTitle:j}=(0,g.Z)(e),L=(0,l.useCallback)(e=>{let{detail:{scale:t=0,x:n=0,y:l=0}={}}=e||{};if(T&&t){let{minScale:e,step:i}=w,s=t<e+i;s&&(n||l)&&window.setTimeout(()=>null==r?void 0:r.reset(),50),x||j(s?(0,a.basename)(T):`${(0,a.basename)(T)} (${Math.floor(100*t)}%)`)}},[x,r,j,T]),k=(0,l.useCallback)(e=>null==v?void 0:v(e,{step:.3}),[v]);return(0,m.Z)(b,o),(0,l.useEffect)(()=>(t&&n&&(t.addEventListener("panzoomchange",L),n.addEventListener("wheel",k)),()=>{null==t||t.removeEventListener("panzoomchange",L),null==n||n.removeEventListener("wheel",k)}),[n,t,L,k]),(0,l.useEffect)(()=>(t&&!r&&i((0,f.Z)(t,w)),()=>null==r?void 0:r.destroy()),[t,r]),{reset:o,scale:null==s?void 0:s(),zoomIn:c,zoomOut:u,zoomToPoint:d}},b=n(54944),T=n(59140),j=n(64997),L=n(84914),k=n(54776),E=n(26550),y=n(27972),C=n(91410);let{maxScale:$,minScale:Z}=w;var z=({id:e})=>{let{processes:{[e]:t}={},url:u}=(0,p.z)(),{componentWindow:d,closing:v=!1,url:f=""}=t||{},[m,w]=(0,l.useState)({}),[z,M]=(0,l.useState)(!1),{prependFileToTitle:R}=(0,g.Z)(e),{readFile:q,readdir:S}=(0,T.o)(),H=(0,l.useRef)(null),A=(0,l.useRef)(null),P=(0,l.useRef)(null),{reset:B,scale:O,zoomIn:U,zoomOut:_,zoomToPoint:D}=x(e,A.current,P.current),{fullscreenElement:F,toggleFullscreen:N}=(0,j.S)(),V=(0,l.useCallback)(async()=>{let e=await q(f),t=(0,y.RT)(f);if([".ani",".cur"].includes(t))e=await (0,C.gp)(e);else if(".jxl"!==t||await (0,y.vl)()){if(".qoi"===t){let{decodeQoi:t}=await n.e(6453).then(n.bind(n,16453));e=t(e)}else E.M0.has(t)&&(e=(await n.e(6173).then(n.t.bind(n,66173,23))).bufferToURI(e).replace("data:image/png;base64,",""))}else e=(0,y.fv)(await (0,y.dU)(e));w(t=>{let[n]=Object.keys(t);if(n){if(n===f)return t;null==B||B()}return{[f]:(0,y.wB)(f,e)}}),R((0,a.basename)(f))},[R,q,B,f]),I=(0,l.useCallback)(async({key:t})=>{switch(t){case"ArrowRight":case"ArrowLeft":{let n=await S((0,a.dirname)(f)),r=n.indexOf((0,a.basename)(f)),l=(t,r)=>{if(-1===t)return;let i=t+(r?1:-1);if(-1===i||i===n.length)return;let s=n[i];E.lM.has((0,y.RT)(s))?u(e,(0,a.join)((0,a.dirname)(f),s)):l(i,r)};l(r,"ArrowRight"===t)}}},[e,S,u,f]);return(0,l.useEffect)(()=>{!f||m[f]||v||V()},[v,V,m,f]),(0,l.useEffect)(()=>(null==d||d.addEventListener("keydown",I),()=>null==d?void 0:d.removeEventListener("keydown",I)),[d,I]),(0,r.jsxs)(h,{ref:H,$showImage:!!(m[f]&&!z),onContextMenu:y.nK,...(0,b.Z)({id:e}),children:[(0,r.jsxs)("nav",{className:"top",children:[(0,r.jsx)(k.Z,{disabled:!f||O===$||z,onClick:U,...(0,y.PS)("Zoom in"),children:(0,r.jsx)(o,{})}),(0,r.jsx)(k.Z,{disabled:!f||O===Z||z,onClick:_,...(0,y.PS)("Zoom out"),children:(0,r.jsx)(c,{})})]}),(0,r.jsxs)("figure",{ref:P,...(0,L.Z)(e=>{O===Z?null==D||D(2*Z,e,{animate:!0}):null==B||B()}),children:[(0,r.jsx)("img",{ref:A,alt:(0,a.basename)(f,(0,a.extname)(f)),decoding:"async",loading:"eager",onError:()=>M(!0),onLoad:()=>M(!1),src:m[f],...E.h7}),z&&(0,r.jsxs)("div",{children:[(0,a.basename)(f),(0,r.jsx)("br",{}),"Sorry, Photos can't open this file because the format is currently unsupported, or the file is corrupted"]})]}),(0,r.jsx)("nav",{className:"bottom",children:(0,r.jsx)(k.Z,{disabled:!f,onClick:()=>N(H.current,"show"),...(0,y.PS)("Full-screen"),children:F===H.current?(0,r.jsx)(s,{}):(0,r.jsx)(i,{})})})]})}},54944:function(e,t,n){var r=n(1864),a=n(67294),l=n(46013),i=n(36094),s=n(41893),o=n(59140),c=n(78743),u=n(12691),d=n(26550),v=n(27972);t.Z=({callback:e,directory:t=d.Ll,id:n,onDragLeave:h,onDragOver:f,updatePositions:m})=>{let{url:p}=(0,c.z)(),{iconPositions:g,sortOrders:w,setIconPositions:x}=(0,u.k)(),{mkdirRecursive:b,updateFolder:T,writeFile:j}=(0,o.o)(),L=(0,a.useCallback)(async(e,t,a)=>{if(n){if(t){let l=(0,r.join)(d.Ll,e);if(await b(d.Ll),await j(l,t,!0))return a===s.v.UPDATE_URL&&p(n,l),T(d.Ll,e),(0,r.basename)(l)}else a===s.v.UPDATE_URL&&p(n,e)}return""},[n,b,T,p,j]),{openTransferDialog:k}=(0,l.Z)();return{onDragLeave:h,onDragOver:e=>{null==f||f(e),(0,v.nK)(e)},onDrop:a=>{if(!d.my.has((0,v.RT)(t))){if(m&&a.target instanceof HTMLElement){let{files:e,text:n}=(0,i.p4)(a);if(0===e.length&&""===n)return;let l={x:a.clientX,y:a.clientY},s=[];if(n){try{s=JSON.parse(n)}catch{}if(!Array.isArray(s))return;let[e]=s;if(!e||e.startsWith(t)&&(0,r.basename)(e)===(0,r.relative)(t,e))return;s=s.map(e=>(0,r.basename)(e))}else s=e instanceof FileList?[...e].map(e=>e.name):[...e].map(e=>{var t;return(null===(t=e.getAsFile())||void 0===t?void 0:t.name)||""}).filter(Boolean);s=s.map(e=>{if(!g[`${t}/${e}`])return e;let n=0,a="";do n+=1,a=`${t}/${(0,r.basename)(e,(0,r.extname)(e))} (${n})${(0,r.extname)(e)}`;while(g[a]);return(0,r.basename)(a)}),(0,v.vi)(t,a.target,g,w,l,s,x)}(0,i.WG)(a,e||L,t,k,!!n)}}}}},34772:function(e,t,n){var r=n(67294),a=n(78743),l=n(28272),i=n(26550);t.Z=e=>{let{title:t}=(0,a.z)(),[n]=e.split(i.CC),{title:s}=l.Z[n]||{};return{appendFileToTitle:(0,r.useCallback)((n,r)=>{let a=n?` - ${n}${r?` ${i.xy}`:""}`:"";t(e,`${s}${a}`)},[e,s,t]),prependFileToTitle:(0,r.useCallback)((n,r,a)=>{let l=n?`${r?`${i.xy} `:""}${n}${a?" ":" - "}`:"";t(e,`${l}${s}`)},[e,s,t])}}},84914:function(e,t,n){var r=n(67294),a=n(26550);t.Z=(e,t=!1)=>{let n=(0,r.useRef)(),l=(0,r.useRef)(0);return{onClick:(0,r.useCallback)(r=>{let i=()=>{r.stopPropagation(),e(r)},s=()=>{n.current&&(clearTimeout(n.current),n.current=void 0)},o=()=>{l.current>=12&&s(),void 0===n.current?(r.target.removeEventListener("pointermove",o),l.current=0):l.current+=1};t?i():void 0===n.current?(n.current=window.setTimeout(s,a.jx.DOUBLE_CLICK),r.target.addEventListener("pointermove",o,{passive:!0})):(s(),i())},[e,t])}}},52362:function(e,t,n){var r=n(67294);t.Z=(e,t)=>{let[n,a]=(0,r.useState)();(0,r.useEffect)(()=>{t&&a(new ResizeObserver(t))},[t]),(0,r.useEffect)(()=>(e instanceof HTMLElement&&(null==n||n.observe(e)),()=>{e instanceof HTMLElement&&(null==n||n.unobserve(e))}),[e,n])}}}]);