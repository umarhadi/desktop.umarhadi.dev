!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).loadPyodide={})}(this,function(e){"use strict";var s,t,r,i,n={exports:{}},c=(n.exports=function(){function r(e){return e.charAt(0).toUpperCase()+e.substring(1)}function e(e){return function(){return this[e]}}var t=["isConstructor","isEval","isNative","isToplevel"],i=["columnNumber","lineNumber"],n=["fileName","functionName","source"],o=t.concat(i,n,["args"],["evalOrigin"]);function s(e){if(e)for(var t=0;t<o.length;t++)void 0!==e[o[t]]&&this["set"+r(o[t])](e[o[t]])}s.prototype={getArgs:function(){return this.args},setArgs:function(e){if("[object Array]"!==Object.prototype.toString.call(e))throw new TypeError("Args must be an Array");this.args=e},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(e){if(e instanceof s)this.evalOrigin=e;else{if(!(e instanceof Object))throw new TypeError("Eval Origin must be an Object or StackFrame");this.evalOrigin=new s(e)}},toString:function(){var e=this.getFileName()||"",t=this.getLineNumber()||"",r=this.getColumnNumber()||"",i=this.getFunctionName()||"";return this.getIsEval()?e?"[eval] ("+e+":"+t+":"+r+")":"[eval]:"+t+":"+r:i?i+" ("+e+":"+t+":"+r+")":e+":"+t+":"+r}},s.fromString=function(e){var t,r,i,n=e.indexOf("("),o=e.lastIndexOf(")"),a=e.substring(0,n),n=e.substring(n+1,o).split(","),e=e.substring(o+1);return 0===e.indexOf("@")&&(t=(o=/@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(e,""))[1],r=o[2],i=o[3]),new s({functionName:a,args:n||void 0,fileName:t,lineNumber:r||void 0,columnNumber:i||void 0})};for(var a=0;a<t.length;a++)s.prototype["get"+r(t[a])]=e(t[a]),s.prototype["set"+r(t[a])]=function(t){return function(e){this[t]=Boolean(e)}}(t[a]);for(var l=0;l<i.length;l++)s.prototype["get"+r(i[l])]=e(i[l]),s.prototype["set"+r(i[l])]=function(r){return function(e){if(t=e,isNaN(parseFloat(t))||!isFinite(t))throw new TypeError(r+" must be a Number");var t;this[r]=Number(e)}}(i[l]);for(var c=0;c<n.length;c++)s.prototype["get"+r(n[c])]=e(n[c]),s.prototype["set"+r(n[c])]=function(t){return function(e){this[t]=String(e)}}(n[c]);return s}(),s=n.exports,t=/(^|@)\S+:\d+/,r=/^\s*at .*(\S+:\d+|\(native\))/m,i=/^(eval@)?(\[native code])?$/,{parse:function(e){if(void 0!==e.stacktrace||void 0!==e["opera#sourceloc"])return this.parseOpera(e);if(e.stack&&e.stack.match(r))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw new Error("Cannot parse given Error object")},extractLocation:function(e){if(-1===e.indexOf(":"))return[e];e=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(e.replace(/[()]/g,""));return[e[1],e[2]||void 0,e[3]||void 0]},parseV8OrIE:function(e){return e.stack.split("\n").filter(function(e){return!!e.match(r)},this).map(function(e){var t=(r=(e=-1<e.indexOf("(eval ")?e.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(,.*$)/g,""):e).replace(/^\s+/,"").replace(/\(eval code/g,"(").replace(/^.*?\s+/,"")).match(/ (\(.+\)$)/),r=t?r.replace(t[0],""):r,i=this.extractLocation(t?t[1]:r),t=t&&r||void 0,r=-1<["eval","<anonymous>"].indexOf(i[0])?void 0:i[0];return new s({functionName:t,fileName:r,lineNumber:i[1],columnNumber:i[2],source:e})},this)},parseFFOrSafari:function(e){return e.stack.split("\n").filter(function(e){return!e.match(i)},this).map(function(e){if(-1===(e=-1<e.indexOf(" > eval")?e.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1"):e).indexOf("@")&&-1===e.indexOf(":"))return new s({functionName:e});var t=/((.*".+"[^@]*)?[^@]*)(?:@)/,r=e.match(t),r=r&&r[1]?r[1]:void 0,t=this.extractLocation(e.replace(t,""));return new s({functionName:r,fileName:t[0],lineNumber:t[1],columnNumber:t[2],source:e})},this)},parseOpera:function(e){return!e.stacktrace||-1<e.message.indexOf("\n")&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(e){for(var t=/Line (\d+).*script (?:in )?(\S+)/i,r=e.message.split("\n"),i=[],n=2,o=r.length;n<o;n+=2){var a=t.exec(r[n]);a&&i.push(new s({fileName:a[2],lineNumber:a[1],source:r[n]}))}return i},parseOpera10:function(e){for(var t=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,r=e.stacktrace.split("\n"),i=[],n=0,o=r.length;n<o;n+=2){var a=t.exec(r[n]);a&&i.push(new s({functionName:a[3]||void 0,fileName:a[2],lineNumber:a[1],source:r[n]}))}return i},parseOpera11:function(e){return e.stack.split("\n").filter(function(e){return!!e.match(t)&&!e.match(/^Error created at/)},this).map(function(e){var t,r=e.split("@"),i=this.extractLocation(r.pop()),r=r.shift()||"",n=r.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,r=void 0===(t=r.match(/\(([^)]*)\)/)?r.replace(/^[^(]+\(([^)]*)\)$/,"$1"):t)||"[arguments not available]"===t?void 0:t.split(",");return new s({functionName:n,args:r,fileName:i[0],lineNumber:i[1],columnNumber:i[2],source:e})},this)}});const d="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node&&void 0===process.browser;let u,p,f,m,y,h,g,v,w;if(h=d?function(e,t){return f.resolve(t||".",e)}:function(e,t){return void 0===t&&(t=location),new URL(e,t).toString()},d||(g="/"),v=d?async function(t,e){if((t=t.startsWith("file://")?t.slice("file://".length):t).includes("://")){let e=await p(t);if(e.ok)return new Uint8Array(await e.arrayBuffer());throw new Error(`Failed to load '${t}': request failed.`)}t=await y.readFile(t);return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}:async function(e,t){e=new URL(e,location);let r=t?{integrity:t}:{},i=await fetch(e,r);if(i.ok)return new Uint8Array(await i.arrayBuffer());throw new Error(`Failed to load '${e}': request failed.`)},globalThis.document)w=async e=>import(e);else if(globalThis.importScripts)w=async t=>{try{globalThis.importScripts(t)}catch(e){if(!(e instanceof TypeError))throw e;await import(t)}};else{if(!d)throw new Error("Cannot determine runtime environment");w=async function(e){(e=e.startsWith("file://")?e.slice("file://".length):e).includes("://")?m.runInThisContext(await(await p(e)).text()):await import(u.pathToFileURL(e).href)}}function l(a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=a[Symbol.asyncIterator];return t?t.call(a):(a=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&i>=e.length?void 0:e)&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(a),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(o){e[o]=a[o]&&function(n){return new Promise(function(e,t){var r,i;r=e,e=t,i=(n=a[o](n)).done,t=n.value,Promise.resolve(t).then(function(e){r({value:e,done:i})},e)})}}}const _=async e=>{const s=[],t=(await async function e(t){var r,i;try{for(var n,o=l(t.values());!(n=await o.next()).done;){var a=n.value;s.push(a),"directory"===a.kind&&await e(a)}}catch(e){r={error:e}}finally{try{n&&!n.done&&(i=o.return)&&await i.call(o)}finally{if(r)throw r.error}}}(e),new Map);t.set(".",e);for(const i of s){var r=(await e.resolve(i)).join("/");t.set(r,i)}return t};function b(t,e){var r,i,n,o,a=null!=e.stdLibURL?e.stdLibURL:e.indexURL+"python_stdlib.zip";{var s=t;const l=v(a);s.preRun.push(()=>{const t=s._py_version_major(),r=s._py_version_minor();s.FS.mkdirTree("/lib"),s.FS.mkdirTree(`/lib/python${t}.${r}/site-packages`),s.addRunDependency("install-stdlib"),l.then(e=>{s.FS.writeFile(`/lib/python${t}${r}.zip`,e)}).catch(e=>{console.error("Error occurred while installing the standard library:"),console.error(e)}).finally(()=>{s.removeRunDependency("install-stdlib")})})}n=t,o=e.homedir,n.preRun.push(function(){try{n.FS.mkdirTree(o)}catch(e){console.error(`Error occurred while making a home directory '${o}':`),console.error(e),console.error("Using '/' for a home directory instead"),o="/"}n.ENV.HOME=o,n.FS.chdir(o)}),r=t,i=e._node_mounts,r.preRun.push(()=>{for(const e of i)r.FS.mkdirTree(e),r.FS.mount(r.FS.filesystems.NODEFS,{root:e},e)}),t.preRun.push(()=>{{var e=t;const p=e.FS,i=e.FS.filesystems.MEMFS,f=e.PATH,m={DIR_MODE:16895,FILE_MODE:33279,mount:function(e){if(e.opts.fileSystemHandle)return i.mount.apply(null,arguments);throw new Error("opts.fileSystemHandle is required")},syncfs:async(e,t,r)=>{try{var i=m.getLocalSet(e),n=await m.getRemoteSet(e),o=t?n:i,a=t?i:n;await m.reconcile(e,o,a),r(null)}catch(e){r(e)}},getLocalSet:e=>{let t=Object.create(null);function r(e){return"."!==e&&".."!==e}function i(t){return e=>f.join2(t,e)}let n=p.readdir(e.mountpoint).filter(r).map(i(e.mountpoint));for(;n.length;){var o=n.pop(),a=p.stat(o);p.isDir(a.mode)&&n.push.apply(n,p.readdir(o).filter(r).map(i(o))),t[o]={timestamp:a.mtime,mode:a.mode}}return{type:"local",entries:t}},getRemoteSet:async e=>{const t=Object.create(null),r=await _(e.opts.fileSystemHandle);for(var[i,n]of r)"."!==i&&(t[f.join2(e.mountpoint,i)]={timestamp:"file"===n.kind?(await n.getFile()).lastModifiedDate:new Date,mode:"file"===n.kind?m.FILE_MODE:m.DIR_MODE});return{type:"remote",entries:t,handles:r}},loadLocalEntry:e=>{const t=p.lookupPath(e).node,r=p.stat(e);if(p.isDir(r.mode))return{timestamp:r.mtime,mode:r.mode};if(p.isFile(r.mode))return t.contents=i.getFileDataAsTypedArray(t),{timestamp:r.mtime,mode:r.mode,contents:t.contents};throw new Error("node type not supported")},storeLocalEntry:(e,t)=>{if(p.isDir(t.mode))p.mkdirTree(e,t.mode);else{if(!p.isFile(t.mode))throw new Error("node type not supported");p.writeFile(e,t.contents,{canOwn:!0})}p.chmod(e,t.mode),p.utime(e,t.timestamp,t.timestamp)},removeLocalEntry:e=>{var t=p.stat(e);p.isDir(t.mode)?p.rmdir(e):p.isFile(t.mode)&&p.unlink(e)},loadRemoteEntry:async e=>{if("file"===e.kind){const t=await e.getFile();return{contents:new Uint8Array(await t.arrayBuffer()),mode:m.FILE_MODE,timestamp:t.lastModifiedDate}}if("directory"===e.kind)return{mode:m.DIR_MODE,timestamp:new Date};throw new Error("unknown kind: "+e.kind)},storeRemoteEntry:async(e,t,r)=>{const i=e.get(f.dirname(t)),n=p.isFile(r.mode)?await i.getFileHandle(f.basename(t),{create:!0}):await i.getDirectoryHandle(f.basename(t),{create:!0});if("file"===n.kind){const o=await n.createWritable();await o.write(r.contents),await o.close()}e.set(t,n)},removeRemoteEntry:async(e,t)=>{const r=e.get(f.dirname(t));await r.removeEntry(f.basename(t)),e.delete(t)},reconcile:async(e,i,n)=>{let o=0;const a=[],t=(Object.keys(i.entries).forEach(function(e){const t=i.entries[e],r=n.entries[e];(!r||p.isFile(t.mode)&&t.timestamp.getTime()>r.timestamp.getTime())&&(a.push(e),o++)}),a.sort(),[]);if(Object.keys(n.entries).forEach(function(e){i.entries[e]||(t.push(e),o++)}),t.sort().reverse(),o){const c=("remote"===i.type?i:n).handles;for(const d of a){var r,s=f.normalize(d.replace(e.mountpoint,"/")).substring(1);"local"===n.type?(r=c.get(s),r=await m.loadRemoteEntry(r),m.storeLocalEntry(d,r)):(r=m.loadLocalEntry(d),await m.storeRemoteEntry(c,s,r))}for(const u of t){var l;"local"===n.type?m.removeLocalEntry(u):(l=f.normalize(u.replace(e.mountpoint,"/")).substring(1),await m.removeRemoteEntry(c,l))}}}};return void(e.FS.filesystems.NATIVEFS_ASYNC=m)}})}async function o(e={}){if(d&&(u=(await import("url")).default,y=await import("fs/promises"),p=globalThis.fetch?fetch:(await import("node-fetch")).default,m=(await import("vm")).default,f=await import("path"),g=f.sep,"undefined"==typeof require)){const l={fs:await import("fs"),crypto:await import("crypto"),ws:await import("ws"),child_process:await import("child_process")};globalThis.require=function(e){return l[e]}}await 0;let t=e.indexURL||function(){if("string"==typeof __dirname)return __dirname;let t;try{throw new Error}catch(e){t=e}let e=c.parse(t)[0].fileName;var r=e.lastIndexOf(g);if(-1===r)throw new Error("Could not extract indexURL path from pyodide module location");return e.slice(0,r)}();(t=h(t)).endsWith("/")||(t+="/"),e.indexURL=t;const r={fullStdLib:!1,jsglobals:globalThis,stdin:globalThis.prompt||void 0,homedir:"/home/pyodide",lockFileURL:t+"repodata.json",args:[],_node_mounts:[]},i=Object.assign(r,e),n=function(){let r={noImageDecoding:!0,noAudioDecoding:!0,noWasmDecoding:!1,preRun:[],quit:(e,t)=>{throw r.exited={status:e,toThrow:t},t}};return r}(),o=(n.print=i.stdout,n.printErr=i.stderr,n.arguments=i.args,{config:i});n.API=o,b(n,i);e=new Promise(e=>n.postRun=e);if(n.locateFile=e=>i.indexURL+e,"function"!=typeof _createPyodideModule&&(a=i.indexURL+"pyodide.asm.js",await w(a)),await _createPyodideModule(n),await e,n.exited)throw n.exited.toThrow;if("0.23.2"!==o.version)throw new Error(`Pyodide version does not match: '0.23.2' <==> '${o.version}'. If you updated the Pyodide version, make sure you also updated the 'indexURL' parameter passed to loadPyodide.`);n.locateFile=e=>{throw new Error("Didn't expect to load any more file_packager files!")};var[a,e]=o.rawRun("import _pyodide_core");a&&n.API.fatal_loading_error("Failed to import _pyodide_core\n",e);const s=function(e,t){e.runPythonInternal_dict=e._pyodide._base.eval_code("{}"),e.importlib=e.runPythonInternal("import importlib; importlib");let r=e.importlib.import_module;e.sys=r("sys"),e.sys.path.insert(0,t.homedir),e.os=r("os");var i,n=e.runPythonInternal("import __main__; __main__.__dict__"),o=e.runPythonInternal("import builtins; builtins.__dict__");e.globals=(i=o,new Proxy(n,{get:(r,e)=>"get"===e?e=>{let t=r.get(e);return t=void 0===t?i.get(e):t}:"has"===e?e=>r.has(e)||i.has(e):Reflect.get(r,e)}));let a=e._pyodide._importhook,s=(a.register_js_finder(),a.register_js_module("js",t.jsglobals),e.makePublicAPI());return a.register_js_module("pyodide_js",s),e.pyodide_py=r("pyodide"),e.pyodide_code=r("pyodide.code"),e.pyodide_ffi=r("pyodide.ffi"),e.package_loader=r("pyodide._package_loader"),e.sitepackages=e.package_loader.SITE_PACKAGES.__str__(),e.dsodir=e.package_loader.DSO_DIR.__str__(),e.defaultLdLibraryPath=[e.dsodir,e.sitepackages],e.os.environ.__setitem__("LD_LIBRARY_PATH",e.defaultLdLibraryPath.join(":")),s.pyodide_py=e.pyodide_py,s.globals=e.globals,s}(o,i);if(s.version.includes("dev")||o.setCdnUrl(`https://cdn.jsdelivr.net/pyodide/v${s.version}/full/`),await o.packageIndexReady,o._pyodide._importhook.register_module_not_found_hook(o._import_name_to_package_name,o.repodata_unvendored_stdlibs_and_test),"0.23.2"!==o.repodata_info.version)throw new Error("Lock file version doesn't match Pyodide version");return o.package_loader.init_loaded_packages(),i.fullStdLib&&await s.loadPackage(o.repodata_unvendored_stdlibs),o.initializeStreams(i.stdin,i.stdout,i.stderr),s}globalThis.loadPyodide=o,e.loadPyodide=o,e.version="0.23.2",Object.defineProperty(e,"__esModule",{value:!0})});